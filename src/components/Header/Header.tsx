import { Link } from 'react-router-dom'
import Popover from '../Popover'
import { useQuery } from '@tanstack/react-query'
import { useContext } from 'react'
import { AppContext } from 'src/contexts/app.context'
import path from 'src/constants/path'
import noproduct from 'src/assets/images/NO-PRODUCT.png'
import cartApi from 'src/apis/cart.api'
import { formatCurrency } from 'src/utils/utils'
import NavHeader from '../NavHeader'
import useSearchProducts from 'src/hooks/useSearchProducts'
import { MobileContext } from 'src/contexts/mobile.context'
import classNames from 'classnames'

export default function Header() {
  const searchProducts = useSearchProducts()
  const MAX_SHOW_CART = 5
  const { isAuthenticated, profile } = useContext(AppContext)
  const { isSearch } = useContext(MobileContext)

  const { data: purchasesInCartData } = useQuery({
    queryKey: ['purchase'],
    queryFn: () => cartApi.getCart(profile?.id as string),
    enabled: Boolean(profile) && isAuthenticated
  })

  const purchasesInCart = purchasesInCartData?.data.data

  return (
    <div className='pb-5 pt-2 bg-gradient-to-b from-pink-500 to-pink-600 text-white'>
      <div className='container'>
        <NavHeader />
        <div className='grid grid-cols-12 mt-4 gap-4 items-end'>
          <Link to={path.home} className='col-span-10 lg:col-span-2 w-full'>
            <svg className='w-20 h-20' viewBox='0 0 514 486' fill='none' xmlns='http://www.w3.org/2000/svg'>
              <path
                d='M255.776 132.178C249.211 132.178 242.914 134.786 238.271 139.429C233.628 144.071 231.02 150.368 231.02 156.934C231.02 163.5 233.628 169.797 238.271 174.44C242.914 179.083 249.211 181.691 255.776 181.691C262.342 181.691 268.639 179.083 273.282 174.44C277.925 169.797 280.533 163.5 280.533 156.934C280.533 150.368 277.925 144.071 273.282 139.429C268.639 134.786 262.342 132.178 255.776 132.178ZM278.179 29.5466C278.179 41.1354 268.765 108.196 257.177 108.196C245.588 108.196 236.204 41.1057 236.204 29.5466C236.49 24.1775 238.824 19.1227 242.726 15.4234C246.628 11.7241 251.8 9.66202 257.177 9.66202C262.553 9.66202 267.725 11.7241 271.627 15.4234C275.529 19.1227 277.863 24.1775 278.15 29.5466M236.204 284.858C236.204 273.24 245.588 206.209 257.177 206.209C268.765 206.209 278.15 273.268 278.15 284.858C278.15 290.421 275.94 295.755 272.007 299.688C268.074 303.622 262.739 305.831 257.177 305.831C251.614 305.831 246.28 303.622 242.346 299.688C238.413 295.755 236.204 290.421 236.204 284.858ZM362.369 82.0389C354.027 90.0826 299.39 130.092 291.287 121.781C283.184 113.469 324.802 60.0231 333.114 51.9497C337.141 48.2808 342.438 46.323 347.884 46.4909C353.329 46.6587 358.496 48.939 362.29 52.849C366.084 56.759 368.207 61.9919 368.211 67.44C368.214 72.8881 366.098 78.1239 362.309 82.0389M150.88 231.889C159.222 223.846 213.859 183.836 221.933 192.148C229.976 200.489 188.417 253.905 180.106 261.978C178.152 263.998 175.812 265.604 173.225 266.701C170.639 267.798 167.858 268.365 165.048 268.367C162.238 268.368 159.457 267.806 156.869 266.712C154.281 265.618 151.939 264.015 149.982 261.998C148.025 259.982 146.494 257.593 145.478 254.973C144.463 252.353 143.984 249.556 144.071 246.747C144.158 243.939 144.808 241.176 145.982 238.624C147.157 236.072 148.833 233.781 150.91 231.889M327.811 265.077C319.976 256.527 281.515 200.787 290.036 192.952C298.556 185.117 350.869 228.135 358.704 236.656C362.469 240.753 364.453 246.177 364.218 251.736C363.983 257.295 361.55 262.533 357.453 266.298C353.356 270.063 347.932 272.046 342.373 271.812C336.814 271.577 331.576 269.144 327.811 265.047M180.524 51.622C188.596 59.904 228.756 114.482 220.444 122.525C212.162 130.658 158.597 89.2484 150.494 80.9069C148.547 78.9401 147.009 76.6074 145.967 74.0434C144.926 71.4793 144.403 68.7345 144.427 65.9672C144.451 63.1999 145.023 60.4647 146.109 57.9194C147.196 55.3741 148.775 53.069 150.756 51.1368C152.738 49.2047 155.082 47.6837 157.654 46.6617C160.225 45.6396 162.974 45.1367 165.741 45.1818C168.508 45.2269 171.239 45.8191 173.776 46.9245C176.313 48.0298 178.606 49.6263 180.524 51.622ZM127.853 135.306C139.471 135.306 206.502 144.69 206.502 156.279C206.502 167.868 139.441 177.252 127.853 177.252C122.29 177.252 116.956 175.042 113.022 171.109C109.089 167.176 106.88 161.841 106.88 156.279C106.88 150.716 109.089 145.382 113.022 141.449C116.956 137.515 122.29 135.306 127.853 135.306ZM383.7 177.907C372.082 177.907 305.051 168.523 305.051 156.934C305.051 145.345 372.111 135.961 383.7 135.961C389.263 135.961 394.597 138.171 398.531 142.104C402.464 146.037 404.673 151.372 404.673 156.934C404.673 162.497 402.464 167.831 398.531 171.764C394.597 175.698 389.263 177.907 383.7 177.907Z'
                fill='white'
              />
              <path
                d='M278.179 29.5466C278.179 41.1354 268.765 108.196 257.177 108.196C245.588 108.196 236.204 41.1057 236.204 29.5466C236.49 24.1775 238.824 19.1227 242.726 15.4234C246.628 11.7241 251.8 9.66202 257.177 9.66202C262.553 9.66202 267.725 11.7241 271.627 15.4234C275.529 19.1227 277.863 24.1775 278.15 29.5466M362.369 82.0389C354.027 90.0826 299.39 130.092 291.287 121.781C283.184 113.469 324.802 60.0231 333.114 51.9497C337.141 48.2808 342.438 46.323 347.884 46.4909C353.329 46.6587 358.496 48.939 362.29 52.849C366.084 56.759 368.207 61.9919 368.211 67.44C368.214 72.8881 366.098 78.1239 362.309 82.0389M150.88 231.889C159.222 223.846 213.859 183.836 221.933 192.148C229.976 200.489 188.417 253.905 180.106 261.978C178.152 263.998 175.812 265.604 173.225 266.701C170.639 267.798 167.858 268.365 165.048 268.367C162.238 268.368 159.457 267.806 156.869 266.712C154.281 265.618 151.939 264.015 149.982 261.998C148.025 259.982 146.494 257.593 145.478 254.973C144.463 252.353 143.984 249.556 144.071 246.747C144.158 243.939 144.808 241.176 145.982 238.624C147.157 236.072 148.833 233.781 150.91 231.889M327.811 265.077C319.976 256.527 281.515 200.787 290.036 192.952C298.556 185.117 350.869 228.135 358.704 236.656C362.469 240.753 364.453 246.177 364.218 251.736C363.983 257.295 361.55 262.533 357.453 266.298C353.356 270.063 347.932 272.046 342.373 271.812C336.814 271.577 331.576 269.144 327.811 265.047M255.776 132.178C249.211 132.178 242.914 134.786 238.271 139.429C233.628 144.071 231.02 150.368 231.02 156.934C231.02 163.5 233.628 169.797 238.271 174.44C242.914 179.083 249.211 181.691 255.776 181.691C262.342 181.691 268.639 179.083 273.282 174.44C277.925 169.797 280.533 163.5 280.533 156.934C280.533 150.368 277.925 144.071 273.282 139.429C268.639 134.786 262.342 132.178 255.776 132.178ZM236.204 284.858C236.204 273.24 245.588 206.209 257.177 206.209C268.765 206.209 278.15 273.268 278.15 284.858C278.15 290.421 275.94 295.755 272.007 299.688C268.074 303.622 262.739 305.831 257.177 305.831C251.614 305.831 246.28 303.622 242.346 299.688C238.413 295.755 236.204 290.421 236.204 284.858ZM180.524 51.622C188.596 59.904 228.756 114.482 220.444 122.525C212.162 130.658 158.597 89.2484 150.494 80.9069C148.547 78.9401 147.009 76.6074 145.967 74.0434C144.926 71.4793 144.403 68.7345 144.427 65.9672C144.451 63.1999 145.023 60.4647 146.109 57.9194C147.196 55.3741 148.775 53.069 150.756 51.1368C152.738 49.2047 155.082 47.6837 157.654 46.6617C160.225 45.6396 162.974 45.1367 165.741 45.1818C168.508 45.2269 171.239 45.8191 173.776 46.9245C176.313 48.0298 178.606 49.6263 180.524 51.622ZM127.853 135.306C139.471 135.306 206.502 144.69 206.502 156.279C206.502 167.868 139.441 177.252 127.853 177.252C122.29 177.252 116.956 175.042 113.022 171.109C109.089 167.176 106.88 161.841 106.88 156.279C106.88 150.716 109.089 145.382 113.022 141.449C116.956 137.515 122.29 135.306 127.853 135.306ZM383.7 177.907C372.082 177.907 305.051 168.523 305.051 156.934C305.051 145.345 372.111 135.961 383.7 135.961C389.263 135.961 394.597 138.171 398.531 142.104C402.464 146.037 404.673 151.372 404.673 156.934C404.673 162.497 402.464 167.831 398.531 171.764C394.597 175.698 389.263 177.907 383.7 177.907Z'
                stroke='white'
                strokeWidth='0.96101'
              />
              <path
                d='M101.765 384.7C95.2814 381.574 89.4737 379.207 84.3419 377.598C73.2582 390.989 66.717 403.969 64.7181 416.539C64.4106 418.582 64.2568 420.636 64.2568 422.699C64.2568 424.762 64.4522 426.837 64.843 428.926C60.4928 432.142 56.0145 434.535 51.4081 436.105C49.8 436.669 48.4962 436.95 47.4968 436.95C46.4973 436.95 45.4626 436.688 44.3927 436.162C43.3292 435.644 42.3618 434.839 41.4905 433.75C39.4083 431.316 38.3672 428.077 38.3672 424.035C38.3672 419.992 39.0943 415.904 40.5487 411.772C42.003 407.64 44.0147 403.466 46.5838 399.25C51.4081 391.293 58.3658 383.009 67.4569 374.398C63.8884 374.181 60.3422 374.072 56.8185 374.072C53.3012 374.072 49.627 374.53 45.7958 375.446C37.7105 377.355 32.8862 381.007 31.323 386.401C31.0155 387.356 30.8617 388.605 30.8617 390.149C30.8617 391.693 31.3838 393.683 32.4281 396.117C31.5568 397.725 29.5355 398.379 26.3641 398.078C23.0583 397.77 20.47 396.876 18.5992 395.396C15.0755 392.616 13.3137 389.553 13.3137 386.209C13.3137 379.681 17.8817 374.44 27.0177 370.487C35.4938 366.79 45.8182 364.942 57.991 364.942C63.4303 364.942 69.3886 365.637 75.8658 367.027C92.1709 353.464 108.889 343.527 126.021 337.217C134.286 334.174 141.592 332.652 147.942 332.652C150.895 332.652 153.102 333.315 154.563 334.641C156.017 335.968 156.744 337.643 156.744 339.667C156.744 341.692 156.213 344.203 155.149 347.202C154.086 350.2 152.747 353.538 151.132 357.215C149.524 360.887 147.797 364.833 145.952 369.055C144.101 373.271 142.371 377.573 140.763 381.961C137.028 392.18 135.16 400.836 135.16 407.928C135.16 413.098 137.441 415.683 142.002 415.683C143.309 415.683 144.745 415.357 146.308 414.703C147.134 415.273 147.81 416.026 148.336 416.961C148.855 417.897 149.114 418.711 149.114 419.402C149.114 420.101 148.842 421.1 148.297 422.401C147.753 423.708 146.981 425.024 145.981 426.351C144.982 427.677 143.777 428.948 142.368 430.166C140.952 431.383 139.395 432.469 137.697 433.424C131.348 437.037 124.48 437.582 117.093 435.057C110.962 433.014 106.589 428.795 103.975 422.401C102.675 419.101 102.024 415.341 102.024 411.119C102.024 406.903 102.675 402.937 103.975 399.221C105.282 395.499 106.99 391.844 109.098 388.256C111.205 384.668 113.621 381.202 116.344 377.858C119.06 374.507 121.84 371.301 124.685 368.238C127.536 365.169 130.32 362.286 133.036 359.589C135.753 356.898 138.155 354.4 140.244 352.093C144.985 347.006 147.355 343.505 147.355 341.589C147.355 340.59 146.442 340.09 144.616 340.09C136.698 340.09 127.674 343.047 117.545 348.96C107.762 354.701 98.5873 362.113 90.0215 371.198C96.9344 373.678 101.131 375.92 102.611 377.925C104.308 380.18 104.027 382.439 101.765 384.7ZM175.474 431.934C175.474 433.677 174.017 434.548 171.102 434.548C163.888 434.548 158.759 431.678 155.716 425.937C154.582 423.894 154.015 421.459 154.015 418.634C154.015 415.808 154.428 412.993 155.255 410.186C156.081 407.38 157.19 404.606 158.58 401.864C159.97 399.128 161.578 396.476 163.404 393.907C165.23 391.344 167.165 388.977 169.209 386.805C173.514 382.192 177.602 378.95 181.471 377.08C182.515 376.605 183.464 376.368 184.316 376.368C185.161 376.368 185.866 376.388 186.43 376.426C187.865 376.561 188.932 377.105 189.63 378.06C186.978 383.672 184.803 388.804 183.105 393.455C190.844 385.844 199.846 380.648 210.109 377.868C213.46 376.951 216.385 376.493 218.883 376.493C221.382 376.493 222.827 376.961 223.217 377.896C223.608 378.832 223.804 379.69 223.804 380.472C223.804 381.254 223.695 382.307 223.477 383.634C223.259 384.96 222.695 386.799 221.786 389.15C220.869 391.495 219.934 393.865 218.979 396.261C216.545 402.348 215.328 406.499 215.328 408.716C215.328 412.541 216.699 414.453 219.441 414.453C224.137 414.453 229.31 411.368 234.961 405.199C236.614 403.411 238.113 401.496 239.459 399.452C241.419 399.324 242.399 400.128 242.399 401.864C242.399 403.261 241.505 405.554 239.718 408.745C237.937 411.942 236.233 414.703 234.605 417.029C232.972 419.361 231.133 421.635 229.089 423.852C227.045 426.069 224.806 428.068 222.372 429.849C217.067 433.718 211.894 435.653 206.851 435.653C201.803 435.653 197.975 434.327 195.367 431.675C192.76 429.022 191.456 425.152 191.456 420.066C191.456 412.544 195.371 403.543 203.2 393.061C205.589 389.89 206.63 388.304 206.323 388.304C203.023 388.304 198.372 390.39 192.369 394.56C186.411 398.738 181.865 403.174 178.732 407.87C176.733 416 175.647 424.022 175.474 431.934Z'
                fill='white'
                stroke='white'
              />
              <path
                d='M245.321 434.413C235.839 434.413 231.098 429 231.098 418.172C231.098 408.998 236.165 397.258 246.301 382.951C255.213 370.388 264.864 359.865 275.256 351.382C281.823 346.033 286.673 343.358 289.806 343.358C292.112 343.358 294.156 344.424 295.937 346.558C297.891 348.819 298.868 351.135 298.868 353.506C298.868 355.876 298.359 358.007 297.34 359.897C296.315 361.787 294.944 363.689 293.227 365.605C291.51 367.514 289.489 369.404 287.163 371.275C284.837 373.146 282.371 374.908 279.763 376.561C274.369 380.039 269.083 382.647 263.907 384.383C262.042 388.516 260.194 393.106 258.362 398.155C267.145 390.236 277.386 384.713 289.085 381.587C292.827 380.587 295.979 380.087 298.541 380.087C301.11 380.087 302.655 380.533 303.173 381.423C303.699 382.314 303.798 383.499 303.471 384.979C303.145 386.453 302.523 388.125 301.607 389.996C300.697 391.866 299.762 393.801 298.801 395.8C296.411 400.977 295.216 404.673 295.216 406.89C295.216 411.458 296.674 413.742 299.589 413.742C302.805 413.742 306.393 412.285 310.352 409.369C313.876 406.717 316.964 403.411 319.616 399.452C321.57 399.324 322.547 400.128 322.547 401.864C322.547 403.261 321.644 405.513 319.837 408.62C318.037 411.727 316.266 414.412 314.523 416.673C312.787 418.935 310.829 421.164 308.651 423.362C306.479 425.559 304.154 427.504 301.674 429.195C296.107 433.065 290.757 435 285.625 435C280.5 435 276.861 433.686 274.708 431.059C272.556 428.426 271.479 424.653 271.479 419.739C271.479 413.435 275.282 405.541 282.887 396.059C285.238 393.151 286.26 391.697 285.952 391.697C282.473 391.697 277.191 393.868 270.105 398.212C262.584 402.825 257.279 407.348 254.191 411.782C252.41 418.784 251.346 425.46 251 431.809C251 433.545 249.107 434.413 245.321 434.413ZM267.558 376.82C273.171 374.257 277.998 371.192 282.041 367.623C286.084 363.971 288.105 360.819 288.105 358.167C288.105 356.86 287.855 355.652 287.355 354.544C286.856 353.436 286.205 352.881 285.404 352.881C284.597 352.881 283.562 353.471 282.3 354.65C281.045 355.822 279.632 357.453 278.062 359.541C274.756 363.885 271.255 369.645 267.558 376.82Z'
                fill='white'
                stroke='white'
              />
              <path
                d='M377.661 413.732C380.878 413.732 384.465 412.275 388.425 409.36C391.948 406.707 395.036 403.402 397.689 399.442C399.688 399.269 400.642 400.118 400.553 401.989C400.514 403.469 399.614 405.708 397.852 408.706C396.09 411.705 394.36 414.315 392.663 416.539C390.965 418.755 389.075 420.927 386.993 423.054C384.904 425.188 382.684 427.1 380.333 428.791C375.073 432.533 369.944 434.404 364.947 434.404C358.553 434.404 354.29 432.491 352.156 428.667C351.419 427.36 351.073 425.793 351.118 423.967C347.422 428.446 342.158 431.578 335.329 433.366C333.029 433.975 330.553 434.279 327.9 434.279C325.248 434.279 322.823 433.853 320.625 433.001C318.428 432.155 316.548 430.97 314.984 429.445C311.762 426.274 310.15 422.036 310.15 416.731C310.15 410.728 312.697 404.574 317.79 398.27C322.788 392.01 329.201 386.879 337.03 382.874C345.378 378.659 353.899 376.551 362.593 376.551C366.462 376.551 368.179 378.268 367.744 381.702C357.743 381.702 349.026 384.399 341.595 389.794C338.334 392.183 335.777 394.813 333.926 397.684C332.081 400.554 331.158 403.338 331.158 406.035C331.158 411.077 333.288 413.598 337.549 413.598C343.68 413.598 349.856 409.773 356.077 402.123C358.249 399.426 360.78 395.653 363.669 390.803C366.565 385.953 368.935 381.997 370.78 378.934C372.626 375.865 374.519 372.733 376.46 369.536C378.395 366.345 380.253 363.292 382.034 360.377C386.422 353.202 389.139 348.896 390.183 347.461C391.753 345.289 393.601 344.203 395.728 344.203C398.208 344.203 400.011 345.094 401.139 346.875C396.359 354.397 391.904 362.376 387.771 370.814C383.639 379.245 380.769 385.399 379.16 389.275C375.509 398.058 373.683 404.331 373.683 408.091C373.683 411.852 375.009 413.732 377.661 413.732Z'
                fill='white'
                stroke='white'
              />
              <path
                d='M410.662 434.807L410.336 434.74L409.038 434.807C402.164 434.807 396.923 433.113 393.316 429.724C389.927 426.546 388.233 422.241 388.233 416.808C388.233 409.325 391.208 402.172 397.16 395.348C402.946 388.737 409.971 384.105 418.235 381.452C417.973 379.498 418.69 377.89 420.388 376.628C421.605 375.712 423.614 375.254 426.413 375.254C429.22 375.254 431.926 375.516 434.534 376.042C437.148 376.561 439.781 377.711 442.434 379.492C448.174 383.278 451.044 388.368 451.044 394.762C451.044 401.675 449.324 408.239 445.884 414.453C453.367 412.845 459.911 407.845 465.517 399.452C467.477 399.324 468.458 400.128 468.458 401.864C468.458 402.562 468.24 403.411 467.804 404.411C461.891 418.454 450.064 427.76 432.324 432.328C425.975 433.981 418.754 434.807 410.662 434.807ZM409.231 406.169C409.231 411.218 411.338 413.742 415.554 413.742C419.123 413.742 422.71 411.589 426.317 407.284C430.104 402.806 431.997 398.26 431.997 393.647C431.997 388.951 429.735 385.844 425.212 384.326C417.428 386.497 412.45 391.367 410.278 398.933C409.58 401.239 409.231 403.651 409.231 406.169Z'
                fill='white'
                stroke='white'
              />
            </svg>
          </Link>
          <div className={classNames(' w-full lg:block lg:bg-transparent  md:col-span-9', {
            'fixed left-0 bottom-16 z-[200] lg:static bg-gray-300': isSearch,
            'hidden': !isSearch,
          })}>
            <form className='p-4 lg:p-0' onSubmit={searchProducts.onSubmit}>
              <div className='flex bg-white rounded-sm p-1'>
                <input
                  type='text'
                  className='text-black px-3 py-2 border-none outline-none bg-transparent flex-grow'
                  placeholder='Search for products'
                  {...searchProducts.register('search')}
                />
                <button className='bg-pink-500 rounded-sm py-2 px-6 flex-shrink-0 hover:opacity-90'>
                  <svg
                    xmlns='http://www.w3.org/2000/svg'
                    fill='none'
                    viewBox='0 0 24 24'
                    strokeWidth={1.5}
                    stroke='currentColor'
                    className='size-6'
                  >
                    <path
                      strokeLinecap='round'
                      strokeLinejoin='round'
                      d='m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z'
                    />
                  </svg>
                </button>
              </div>
            </form>
          </div>
          <div className='relative col-span-1 justify-self-end'>
            <Popover
              renderPopover={
                <div className=' bg-white relative shadow-md rounded-sm border border-gray-200 w-[400px] text-sm'>
                  {purchasesInCart && isAuthenticated ? (
                    <div className='p-2'>
                      <div className='text-gray-400 capitalize'>New Products</div>
                      <div className='mt-5'>
                        {purchasesInCart.cartDetails.slice(0, MAX_SHOW_CART).map((cart) => (
                          <Link to='/' className='flex mt-2 py-2 hover:bg-gray-100' key={cart.cartDetailsId}>
                            <div className='flex-shrink-0'>
                              <img
                                src={cart.product.images && cart.product.images[0].url}
                                alt={cart.product.name}
                                className='w-16 h-16 object-cover'
                              />
                            </div>
                            <div className='flex-grow ml-2 capitalize overflow-hidden'>
                              <div className='capitalize truncate'>{cart.product.name}</div>
                            </div>
                            <div className='ml-2 flex-shrink text-pink-500'>
                              AUD{formatCurrency(cart.product.price)}
                            </div>
                          </Link>
                        ))}
                      </div>
                      <div className='flex mt-6 items-center justify-between'>
                        <div className='capitalize text-gray-400'>
                          {purchasesInCart.cartDetails.length > MAX_SHOW_CART
                            ? purchasesInCart.cartDetails.length - MAX_SHOW_CART
                            : purchasesInCart.cartDetails.length}{' '}
                          Add to cart
                        </div>
                        <Link
                          to={path.cart}
                          className='border-sm capitalize bg-pink-500 text-white px-5 py-2 hover:opacity-90'
                        >
                          See cart
                        </Link>
                      </div>
                    </div>
                  ) : (
                    <div className='flex flex-col justify-center items-center w-[300px] h-[300px] -translate-x-[-40px]'>
                      <img className='d-block w-64 h-50 object-contain' src={noproduct} />
                      <div className='text-pink-500 text-2xl'>There are no products</div>
                    </div>
                  )}
                </div>
              }
            >
              <Link to={path.cart}>
                <svg
                  xmlns='http://www.w3.org/2000/svg'
                  fill='none'
                  viewBox='0 0 24 24'
                  strokeWidth={1.5}
                  stroke='currentColor'
                  className='size-9'
                >
                  <path
                    strokeLinecap='round'
                    strokeLinejoin='round'
                    d='M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z'
                  />
                </svg>
                {purchasesInCart && isAuthenticated && (
                  <span className='absolute text-center left-[17px] top-[-6px] rounded-md bg-white text-pink-500 w-7 h-5'>
                    {purchasesInCart?.cartDetails.length}
                  </span>
                )}
              </Link>
            </Popover>
          </div>
        </div>
      </div>
    </div >
  )
}
